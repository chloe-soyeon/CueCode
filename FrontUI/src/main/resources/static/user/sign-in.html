<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>로그인</title>
    <!-- iconify -->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        /* ...회원가입과 동일한 스타일... */
        body{
            background: radial-gradient(60rem 40rem at 10% -10%, #e9f6ff 0%, transparent 60%), #f6f8fb;
            font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", Segoe UI, Roboto, Arial, "Noto Sans KR", sans-serif;
            color:#1f2937;
            line-height:1.55;
            margin:0;
        }
        .container.signup{
            max-width:1300px;
            margin:48px auto;
            border-radius:18px;
            box-shadow:0 24px 60px rgba(2,8,20,.08), 0 8px 24px rgba(2,8,20,.06);
            background:#fff;
            overflow:hidden;
        }
        .signup-grid{
            display:grid;
            grid-template-columns:1.05fr 1fr;
            min-height:620px;
        }
        .signup-hero{
            background:linear-gradient(45deg,#172E6C,#6FC8F8);
            padding:56px 48px;
            display:flex; flex-direction:column; justify-content:center;
            color:#fff;
        }
        .signup-hero h3{ font-size:40px; font-weight:800; margin:0 0 14px; line-height:1.15; }
        .signup-hero p{ max-width:420px; margin:0; font-size:15px; color:rgba(255,255,255,.9); }
        .signup-body{
            padding: 40px 48px;
            display:flex; justify-content:center; align-items:center; /* 세로 중앙 정렬 */
            min-height:620px;
        }
        .rail{
            width:100%; max-width:420px; margin:0 auto;
            min-height:400px;
            display: flex;
            flex-direction: column;
            justify-content: center; /* 내부 컨텐츠 세로 중앙 정렬 */
        }
        .rail > *{ width:100%; }
        .signup-body h2{ font-size:26px; font-weight:800; margin:0 0 20px; }
        .form-group{ margin-bottom:16px; }
        label{ display:block; margin-bottom:.35rem; font-weight:600; font-size:.92rem; color:#6b7280; }
        .input-row{
            display:grid;
            grid-template-columns: 1fr;
            gap:0;
            width:100%;
            align-items:center;
        }
        input[type="text"], input[type="password"]{
            width:100%; height:48px; font-size:1rem; padding:10px 14px;
            border:1px solid #e5e7eb; border-radius:12px; background:#fff;
            box-sizing:border-box;
            transition:border-color .18s ease, box-shadow .18s ease;
        }
        input:focus{ border-color:#90cff8; box-shadow:0 0 0 .25rem rgba(111,200,248,.25); }
        .submit-btn{
            width:100%; padding:14px 18px; border:0; border-radius:10px;
            font-size:1rem; font-weight:700; background:#6FC8F8; color:#fff; cursor:pointer;
            transition:background .2s ease, box-shadow .2s ease, transform .12s ease;
        }
        .submit-btn:hover{ background:#5bbcf0; transform:translateY(-1px); box-shadow:0 14px 20px rgba(111,200,248,.35); }
        .login-btn{
            width:100%; padding:14px 18px; border:0; border-radius:10px;
            font-size:1rem; font-weight:700; background:#6FC8F8; color:#fff; cursor:pointer;
            transition:background .2s ease, box-shadow .2s ease, transform .12s ease;
        }
        .login-btn:hover{
            background:#5bbcf0; transform:translateY(-1px); box-shadow:0 14px 20px rgba(111,200,248,.35);
        }
        .msg{ margin-top:10px; color:#d32f2f; font-weight:600; min-height:22px; }
        .subtext, .err, .ok {
            min-height: 22px;
            display: block;
        }
        .err{ color:#ef4444; }
        .ok{ color:#16a34a; }
        .login-text-menu {
            width: 100%;
            margin: 36px 0 0 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0;
            list-style: none;
            color: #8a8a8a;
            font-size: 1.08rem;
            font-weight: 500;
        }
        .login-text-menu li {
            display: flex;
            align-items: center;
        }
        .login-text-menu li:not(:last-child)::after {
            content: '|';
            display: inline-block;
            margin: 0 12px;
            color: #bdbdbd;
            font-size: 1.08em;
            font-weight: 400;
            vertical-align: middle;
        }
        .login-text-menu a {
            color: #8a8a8a;
            text-decoration: none;
            transition: color .18s;
        }
        .login-text-menu a:hover {
            color: #1976d2;
            text-decoration: underline;
        }
        @media (max-width: 575.98px) {
            .signup-grid{ grid-template-columns:1fr; }
            .signup-hero{ min-height:280px; }
            .signup-body{ padding:24px 20px 32px; }
            .rail{ max-width: 100%; }
            .login-text-menu {
                flex-direction: column;
                gap: 0;
                align-items: center;
            }
            .login-text-menu li:not(:last-child)::after {
                content: '|';
                margin: 8px 0;
                display: block;
                text-align: center;
            }
        }
    </style>
</head>
<body>
<div class="container signup">
    <div class="signup-grid">
        <!-- 좌측 -->
        <aside class="signup-hero">
            <img src="/images/logos/logo-white-clean.svg" alt="CueCode Logo" style="max-width:390px; margin-bottom:16px;">
            <h3>Subtle Gestures, Deep Connections</h3>
            <p>CueCode와 함께라면<br>당신의 표현이 언제나 닿을 수 있어요.</p>
        </aside>
        <!-- 우측 -->
        <section class="signup-body">
            <div class="rail">
                <h2>로그인</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="userId">아이디</label>
                        <div class="input-row">
                            <input type="text" id="userId" name="userId" placeholder="아이디" autocomplete="username" required />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password">비밀번호</label>
                        <div class="input-row">
                            <input type="password" id="password" name="password" placeholder="비밀번호" autocomplete="current-password" required />
                        </div>
                        <div class="subtext" id="pwMsg"></div>
                    </div>
                    <button type="submit" class="login-btn">로그인</button>
                </form>
                <div class="msg" id="msg"></div>
                <ul class="login-text-menu">
                    <li><a href="/user/sign-up.html">회원가입</a></li>
                    <li><a href="/user/find-password.html">PW 찾기</a></li>
                </ul>
            </div>
        </section>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const loginForm = document.getElementById('loginForm');
        const msgElement = document.getElementById('msg');

        if (loginForm) {
            loginForm.onsubmit = async function(e) {
                e.preventDefault();
                const userId = document.getElementById('userId').value;
                const password = document.getElementById('password').value;
                try {
                    const res = await fetch('http://localhost:13000/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ userId, password }),
                        credentials: 'include'
                    });
                    const data = await res.json();
                    if (res.ok && data.result === 1) {
                        if (data.accessToken) {
                            document.cookie = `accessToken=${data.accessToken}; path=/;`;
                        }
                        localStorage.setItem('managerId', userId);
                        console.log('로그인 성공, managerId 저장:', userId);
                        // msgElement.textContent = '로그인 성공!'; // 로그인 성공 메시지 주석 처리
                        setTimeout(() => {
                            window.location.href = 'http://localhost:13000/user/dashboard';
                        }, 1500);
                    } else {
                        msgElement.textContent = data.msg || '로그인 실패';
                    }
                } catch (err) {
                    msgElement.textContent = '로그인 요청 실패';
                    console.error('로그인 요청 중 오류 발생:', err);
                }
            };
        } else {
            console.error("오류: 'loginForm' 요소를 찾을 수 없습니다.");
        }
    });
</script>
</body>
</html>

